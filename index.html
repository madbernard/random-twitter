<!DOCTYPE html>
<html>
<head>
  <script src="jquery.js"></script>
  <script src="data_generator.js"></script>
  <link rel="stylesheet" href="twiddler.css" class="CSS">
  <title>Twittler, the Random Tweet Generator</title>
</head>
<body>
  <header></header>
  <section>
    <div class="tweetholder"></div>
  </section>

  <script>

  $(document).ready(function(){
    var $tweetholder = $('.tweetholder');

    var checkInterval;

    function checkForTweets() {
      checkInterval = setInterval(rebuildTweetList, 1000);
    }

    function rebuildTweetList() {
    $tweetholder.html('');
      var index = streams.home.length - 1;
      while(index >= 0){
        var tweet = streams.home[index];
        var $tweet = $('<div></div>');
        var dateOptions = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric'};
        $tweet.text('@' + tweet.user + ': ' + tweet.message + ' - ' + tweet.created_at.toLocaleDateString('en-US', dateOptions));
        $tweet.appendTo($tweetholder);
        index -= 1;
      }
    }

    checkForTweets();

  });

  </script>
</body>
</html>
