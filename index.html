<!DOCTYPE html>
<html>
<head>
  <script src="jquery.js"></script>
  <script src="data_generator.js"></script>
  <link rel="stylesheet" href="twiddler.css" class="CSS">
  <title>Twittler, the Random Tweet Generator</title>
</head>
<body>
  <header></header>
    <section class="main-tweets">
      <div>
        <p>This is text in the section that holds the tweetholder div</p>
      </div>
      <div class="tweetholder"></div>
    </section>
  <script>

  $(document).ready(function(){
    var $tweetholder = $('.tweetholder');

    var checkInterval;

    function checkForTweets() {
      checkInterval = setInterval(rebuildTweetList, 1000);
    }

    function rebuildTweetList() {
      $tweetholder.html('');
      var index = streams.home.length - 1;
      while(index >= 0){
        var tweet = streams.home[index];
        var $tweet = $('<div class="tweet"></div>');
        var handle = '<span class="handle">' + tweet.user + '</span>';
        var dateOptions = { weekday: 'long', year: '2-digit', month: 'numeric', day: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric'};
        var tweetDate = '<span class="tweet-date">' + tweet.created_at.toLocaleDateString('en-US', dateOptions); + '</span>'
        $tweet.html('@' + handle + ': ' + tweet.message + '<br>' + tweetDate);
        $tweet.appendTo($tweetholder);
        index -= 1;
      }
    }
    rebuildTweetList();
    checkForTweets();

  });

  </script>
</body>
</html>
